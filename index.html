<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CTF â€” Jumbled Words & Riddles</title>
  <style>
    :root{
      --bg:#0b1020;
      --card:#0f1724;
      --accent1:linear-gradient(135deg,#6ee7f7 0%, #7c3aed 100%);
      --glass: rgba(255,255,255,0.03);
      --muted: #9aa4be;
      --success: #16a34a;
      --danger: #ef4444;
    }
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial}
    body{margin:0;min-height:100vh;background:radial-gradient(1000px 600px at 10% 10%, rgba(124,58,237,0.12), transparent), radial-gradient(800px 500px at 90% 90%, rgba(99,102,241,0.09), transparent), var(--bg);color:#e6eef8}
    .wrap{max-width:1100px;margin:48px auto;padding:28px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow: 0 6px 30px rgba(2,6,23,0.7);}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    .logo{width:56px;height:56px;border-radius:12px;background:var(--accent1);display:flex;align-items:center;justify-content:center;color:#051025;font-weight:800;box-shadow:0 6px 18px rgba(124,58,237,0.22)}
    h1{font-size:20px;margin:0}
    p.lead{margin:4px 0 12px;color:var(--muted)}

    .grid{display:grid;grid-template-columns:1fr 3fr 2fr;gap:14px;align-items:center;padding:12px;border-radius:12px;background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));}
    .row{display:contents}
    .cell{padding:12px;border-radius:10px}
    .cell.left{display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;color:#cfe9ff}
    .cell.mid{font-size:14px;color:#d6e8ff}
    .cell.right{display:flex;align-items:center;gap:8px}

    .input{width:100%;padding:10px 12px;border-radius:8px;border:2px solid rgba(255,255,255,0.06);background:transparent;color:inherit;outline:none;font-size:14px}
    .input::placeholder{color:var(--muted)}
    .hint{font-size:12px;color:var(--muted)}

    .status{min-width:26px;text-align:center;padding:6px 10px;border-radius:8px;font-weight:700}
    .status.ok{background:linear-gradient(90deg, rgba(16,185,129,0.12), rgba(16,185,129,0.06));color:var(--success);border:1px solid rgba(16,185,129,0.14)}
    .status.bad{background:linear-gradient(90deg, rgba(239,68,68,0.06), rgba(239,68,68,0.03));color:var(--danger);border:1px solid rgba(239,68,68,0.12)}

    .hidden{display:none}
    .center{display:flex;align-items:center;justify-content:center}

    .stage{margin-top:18px;padding:14px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.008));border:1px solid rgba(255,255,255,0.02)}
    .stage h3{margin:0 0 8px}

    .big{font-size:18px;font-weight:700}

    .glow-cta{display:inline-block;padding:10px 16px;border-radius:10px;background:var(--accent1);color:#051025;font-weight:700;box-shadow:0 10px 30px rgba(124,58,237,0.24)}

    /* responsive */
    @media (max-width:880px){.grid{grid-template-columns:1fr;}.cell.left{order:1}.cell.mid{order:2}.cell.right{order:3}}

    /* subtle confetti animation when success */
    .confetti{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;overflow:hidden}
    .confetti i{position:absolute;width:10px;height:16px;opacity:0;transform:translateY(-10vh) rotate(0deg);animation:fall 1800ms linear forwards}
    @keyframes fall{to{transform:translateY(120vh) rotate(720deg);opacity:1}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">CTF</div>
      <div>
        <h1>Jumbled Words â€” Riddle Challenge</h1>
        <p class="lead">Solve the jumbled words + riddles. Correct answers turn green. Finish all to unlock the color challenge.</p>
      </div>
    </header>

    <div class="grid" id="table">
      <!-- header row -->
      <div class="cell left" style="font-size:12px;opacity:0.85">JUMBLED</div>
      <div class="cell mid" style="font-size:12px;opacity:0.85">RIDDLE</div>
      <div class="cell right" style="font-size:12px;opacity:0.85">YOUR ANSWER</div>

      <!-- row 1 -->
      <div class="cell left">WORBSER</div>
      <div class="cell mid">A software application used to access and view websites</div>
      <div class="cell right"><input class="input" data-idx="0" placeholder="Type answer..." /><div class="status" id="s0">â€”</div></div>

      <!-- row 2 -->
      <div class="cell left">XUNIL</div>
      <div class="cell mid">An open-source operating system kernel used in many distributions</div>
      <div class="cell right"><input class="input" data-idx="1" placeholder="Type answer..." /><div class="status" id="s1">â€”</div></div>

      <!-- row 3 -->
      <div class="cell left">LRU</div>
      <div class="cell mid">The address used to locate resources on the web.</div>
      <div class="cell right"><input class="input" data-idx="2" placeholder="Type answer..." /><div class="status" id="s2">â€”</div></div>

      <!-- row 4 -->
      <div class="cell left">RNYCETPION</div>
      <div class="cell mid">Method of encoding data so only authorized parties can read it</div>
      <div class="cell right"><input class="input" data-idx="3" placeholder="Type answer..." /><div class="status" id="s3">â€”</div></div>
    </div>

    <div class="stage hidden" id="colorStage">
      <h3 class="big">Bonus: What's your color?</h3>
      <p class="hint">Type the color name (try the common color used in this CTF: <em>one word</em>).</p>
      <div style="display:flex;gap:10px;align-items:center;max-width:520px">
        <input class="input" id="colorInput" placeholder="enter the color" />
        <div class="status" id="colorStatus">â€”</div>
      </div>
    </div>

    <div class="stage hidden" id="rgbStage">
      <h3 class="big">Enter the RGB code of the color</h3>
      <!--<p class="hint">Accepts formats: <code>#0000ff</code>, <code>0000ff</code>, <code>rgb(0,0,255)</code> or <code>0,0,255</code></p>-->
      <div style="display:flex;gap:10px;align-items:center;max-width:520px">
        <input class="input" id="rgbInput" placeholder="enter the value" />
        <div class="status" id="rgbStatus">â€”</div>
      </div>
    </div>

    <div class="stage hidden center" id="congrats">
      <!--<div>
        <h2 style="margin:0 0 8px">ðŸŽ‰ Congrats!</h2>
        <p class="hint">You've completed the challenge.</p>
        <div style="margin-top:10px" class="glow-cta">Well played â€” CTF cleared</div>
      </div>-->
    </div>

  </div>

  <div class="confetti hidden" id="confetti"></div>

  <script>
    const answers = ["BROWSER","LINUX","URL","ENCRYPTION"];
    const inputs = Array.from(document.querySelectorAll('.input[data-idx]'));
    const statuses = [document.getElementById('s0'),document.getElementById('s1'),document.getElementById('s2'),document.getElementById('s3')];
    let correctCount = 0;

    function setStatus(i,ok){
      const st = statuses[i];
      if(ok){ st.classList.remove('bad'); st.classList.add('ok'); st.textContent='OK'; }
      else { st.classList.remove('ok'); st.classList.add('bad'); st.textContent='âœ•'; }
    }

    function normalize(str){ return String(str||'').trim().toUpperCase().replace(/\s+/g,''); }

    inputs.forEach(inp => {
      const idx = Number(inp.dataset.idx);
      inp.addEventListener('input', e=>{
        const val = normalize(e.target.value);
        if(val.length===0){ statuses[idx].className='status'; statuses[idx].textContent='â€”'; return; }
        if(val === answers[idx]){
          // correct
          if(!statuses[idx].classList.contains('ok')){
            correctCount++;
          }
          setStatus(idx,true);
          e.target.disabled = true;
          e.target.style.borderColor = 'rgba(16,185,129,0.6)';
          // if all correct reveal next stage
          if(correctCount === answers.length){ document.getElementById('colorStage').classList.remove('hidden'); document.getElementById('colorInput').focus(); }
        } else {
          // wrong
          if(statuses[idx].classList.contains('ok')){ correctCount--; }
          setStatus(idx,false);
          e.target.style.borderColor = 'rgba(239,68,68,0.6)';
        }
      });
      // small UX: allow Enter to submit
      inp.addEventListener('keydown', ev=>{ if(ev.key === 'Enter') ev.target.blur(); });
    });

    // color stage logic
    const colorInput = document.getElementById('colorInput');
    const colorStatus = document.getElementById('colorStatus');
    const rgbStage = document.getElementById('rgbStage');
    const rgbInput = document.getElementById('rgbInput');
    const rgbStatus = document.getElementById('rgbStatus');
    const congrats = document.getElementById('congrats');

    colorInput.addEventListener('input', e=>{
      const v = normalize(e.target.value);
      if(v.length===0){ colorStatus.className='status'; colorStatus.textContent='â€”'; return; }
      if(v === 'BLUE'){
        colorStatus.classList.remove('bad'); colorStatus.classList.add('ok'); colorStatus.textContent='OK';
        e.target.disabled = true;
        e.target.style.borderColor='rgba(16,185,129,0.6)';
        // reveal RGB stage
        setTimeout(()=>{ rgbStage.classList.remove('hidden'); rgbInput.focus(); },350);
      } else {
        colorStatus.classList.remove('ok'); colorStatus.classList.add('bad'); colorStatus.textContent='âœ•';
        e.target.style.borderColor='rgba(239,68,68,0.6)';
      }
    });

    function normalizeRGBInput(s){ if(!s) return ''; s = s.trim().toLowerCase(); // allow #rrggbb, rrggbb, rgb(r,g,b), r,g,b
      if(s.startsWith('#')) s = s.slice(1);
      if(s.startsWith('rgb')){
        const m = s.match(/rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\)/);
        if(m) return [m[1],m[2],m[3]].map(n=>String(Number(n))).join(',');
      }
      if(s.includes(',')){
        const parts = s.split(',').map(p=>String(Number(p.trim())));
        return parts.join(',');
      }
      // assume hex rrggbb
      if(s.length===6){
        const r = parseInt(s.slice(0,2),16); const g = parseInt(s.slice(2,4),16); const b = parseInt(s.slice(4,6),16);
        if(!isNaN(r) && !isNaN(g) && !isNaN(b)) return [r,g,b].join(',');
      }
      return s;
    }

    rgbInput.addEventListener('input', e=>{
      const v = e.target.value;
      if(v.trim().length===0){ rgbStatus.className='status'; rgbStatus.textContent='â€”'; return; }
      const norm = normalizeRGBInput(v);
      // target color blue -> 0,0,255
      if(norm === '0,0,255'){
        rgbStatus.classList.remove('bad'); rgbStatus.classList.add('ok'); rgbStatus.textContent='OK';
        e.target.disabled = true;
        e.target.style.borderColor='rgba(16,185,129,0.6)';
        // show congrats and confetti
        setTimeout(()=>{ congrats.classList.remove('hidden'); triggerConfetti(); },400);
      } else {
        rgbStatus.classList.remove('ok'); rgbStatus.classList.add('bad'); rgbStatus.textContent='âœ•';
        e.target.style.borderColor='rgba(239,68,68,0.6)';
      }
    });

    function triggerConfetti(){
      const wrap = document.getElementById('confetti'); wrap.classList.remove('hidden');
      // create a bit of confetti
      for(let i=0;i<40;i++){
        const el = document.createElement('i');
        el.style.left = Math.random()*100 + '%';
        el.style.top = (-10 - Math.random()*10) + 'vh';
        el.style.background = `hsl(${Math.random()*360}deg 70% 60%)`;
        el.style.transform = `rotate(${Math.random()*360}deg)`;
        el.style.animationDelay = (Math.random()*600) + 'ms';
        el.style.opacity = 0.95;
        el.style.borderRadius = '2px';
        wrap.appendChild(el);
      }
      // clear after 3s
      setTimeout(()=>{ wrap.innerHTML=''; wrap.classList.add('hidden'); },3500);
    }

    // optional: small accessibility helper - focus next empty input on success
    document.addEventListener('focusout', (e)=>{
      if(e.target.classList.contains('input')){
        // find next non-disabled input
        const next = Array.from(document.querySelectorAll('.input')).find(i=>!i.disabled && i.value.trim().length===0);
        if(next) next.focus();
      }
    });
  </script>
</body>
</html>

